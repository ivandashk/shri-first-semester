{"version":3,"sources":["card/card-generator.js","card/gestures-camera.js","nav/nav.js","sidebar/sidebar.js"],"names":["data","events","type","title","source","time","description","icon","values","electricity","water","gas","size","temperature","humidity","albumcover","artist","track","name","length","volume","buttons","image","appendDiv","parent","div","document","createElement","appendChild","getIconThemeByEventType","iconName","eventType","isCritical","hasAttachedImage","event","createCard","ribbon","getElementById","card","classList","add","setSize","setType","setCardHeader","header","src","innerHTML","trimTitle","close","str","cardSize","allowedCharWidth","undefined","slice","setBasicInfo","basicInfo","appendCriticalDetails","details","appendDescription","appendPlayer","player","content","querySelector","clone","importNode","appendAttachedImage","container","camera","setAttribute","progress","srcset","sizes","appendButtons","buttonRow","forEach","buttonText","i","button","appendMeasurements","measurements","measurementData","push","measurement","markLastElementInCard","lastChild","contains","placeExpandButton","expand","expandableSibling","lastElementChild","previousElementSibling","appendCameraInterface","cameraInterface","generateCards","cameraProgress","isTouchDevice","documentElement","turnGestureInterfaceOn","setGestures","currentGesture","currentGestureName","recognizeMoves","cameraStyle","window","getComputedStyle","initialBackgroundSize","parseInt","getPropertyValue","initialFingerDistance","prevFingerAtan","constants","cameraState","currentBackgroundSize","currentPosition","currentBrightness","addEventListener","setPointerCapture","pointerId","startX","x","startY","y","isPrimary","Math","sqrt","pow","panX","pinch","rotate","recognizeGesture","recognizeTwoFingerGesture","dx","calculateNewDistance","abs","fixedFinger","movedFinger","_currentGesture$","style","backgroundPositionX","newDistance","zoomDelta","newBackgroundSize","backgroundSize","zoomPercentValue","round","firstElementChild","fingerAtan","atan2","increment","webkitFilter","cancelGesture","pop","navItems","getElementsByClassName","navs","children","toggle","e","j","target","parentNode","remove"],"mappings":"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","file":"scripts.min.js","sourcesContent":["const data = {\r\n    \"events\": [\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Еженедельный отчет по расходам ресурсов\",\r\n            \"source\": \"Сенсоры потребления\",\r\n            \"time\": \"19:00, Сегодня\",\r\n            \"description\": \"Так держать! За последнюю неделю вы потратили на 10% меньше ресурсов, чем неделей ранее.\",\r\n            \"icon\": \"stats\",\r\n            \"data\": {\r\n                \"type\": \"graph\",\r\n                \"values\": [\r\n                    {\r\n                        \"electricity\": [\r\n                            [\"1536883200\", 115],\r\n                            [\"1536969600\", 117],\r\n                            [\"1537056000\", 117.2],\r\n                            [\"1537142400\", 118],\r\n                            [\"1537228800\", 120],\r\n                            [\"1537315200\", 123],\r\n                            [\"1537401600\", 129]\r\n                        ]\r\n                    },\r\n                    {\r\n                        \"water\": [\r\n                            [\"1536883200\", 40],\r\n                            [\"1536969600\", 40.2],\r\n                            [\"1537056000\", 40.5],\r\n                            [\"1537142400\", 41],\r\n                            [\"1537228800\", 41.4],\r\n                            [\"1537315200\", 41.9],\r\n                            [\"1537401600\", 42.6]\r\n                        ]\r\n                    },\r\n                    {\r\n                        \"gas\": [\r\n                            [\"1536883200\", 13],\r\n                            [\"1536969600\", 13.2],\r\n                            [\"1537056000\", 13.5],\r\n                            [\"1537142400\", 13.7],\r\n                            [\"1537228800\", 14],\r\n                            [\"1537315200\", 14.2],\r\n                            [\"1537401600\", 14.5]\r\n                        ]\r\n                    }\r\n                ]\r\n            },\r\n            \"size\": \"l\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Дверь открыта\",\r\n            \"source\": \"Сенсор входной двери\",\r\n            \"time\": \"18:50, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"key\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Уборка закончена\",\r\n            \"source\": \"Пылесос\",\r\n            \"time\": \"18:45, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"robot-cleaner\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Новый пользователь\",\r\n            \"source\": \"Роутер\",\r\n            \"time\": \"18:45, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"router\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Изменен климатический режим\",\r\n            \"source\": \"Сенсор микроклимата\",\r\n            \"time\": \"18:30, Сегодня\",\r\n            \"description\": \"Установлен климатический режим «Фиджи»\",\r\n            \"icon\": \"thermal\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"temperature\": 24,\r\n                \"humidity\": 80\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"critical\",\r\n            \"title\": \"Невозможно включить кондиционер\",\r\n            \"source\": \"Кондиционер\",\r\n            \"time\": \"18:21, Сегодня\",\r\n            \"description\": \"В комнате открыто окно, закройте его и повторите попытку\",\r\n            \"icon\": \"ac\",\r\n            \"size\": \"m\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Музыка включена\",\r\n            \"source\": \"Яндекс.Станция\",\r\n            \"time\": \"18:16, Сегодня\",\r\n            \"description\": \"Сейчас проигрывается:\",\r\n            \"icon\": \"music\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"albumcover\": \"https://avatars.yandex.net/get-music-content/193823/1820a43e.a.5517056-1/m1000x1000\",\r\n                \"artist\": \"Florence & The Machine\",\r\n                \"track\": {\r\n                    \"name\": \"Big God\",\r\n                    \"length\": \"4:31\"\r\n                },\r\n                \"volume\": 80\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Заканчивается молоко\",\r\n            \"source\": \"Холодильник\",\r\n            \"time\": \"17:23, Сегодня\",\r\n            \"description\": \"Кажется, в холодильнике заканчивается молоко. Вы хотите добавить его в список покупок?\",\r\n            \"icon\": \"fridge\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"buttons\": [\"Да\", \"Нет\"]\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Зарядка завершена\",\r\n            \"source\": \"Оконный сенсор\",\r\n            \"time\": \"16:22, Сегодня\",\r\n            \"description\": \"Ура! Устройство «Оконный сенсор» снова в строю!\",\r\n            \"icon\": \"battery\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"critical\",\r\n            \"title\": \"Пылесос застрял\",\r\n            \"source\": \"Сенсор движения\",\r\n            \"time\": \"16:17, Сегодня\",\r\n            \"description\": \"Робопылесос не смог сменить свое местоположение в течение последних 3 минут. Похоже, ему нужна помощь.\",\r\n            \"icon\": \"cam\",\r\n            \"data\": {\r\n                \"image\": \"get_it_from_mocks_:3.jpg\"\r\n            },\r\n            \"size\": \"l\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Вода вскипела\",\r\n            \"source\": \"Чайник\",\r\n            \"time\": \"16:20, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"kettle\",\r\n            \"size\": \"s\"\r\n        }\r\n    ]\r\n}\r\n\r\nconst appendDiv = (parent) => {\r\n    const div = document.createElement(\"div\");\r\n    parent.appendChild(div);\r\n    return div;\r\n}\r\n\r\nconst getIconThemeByEventType = (iconName, eventType) => {\r\n    if (!isCritical(eventType)) return iconName;\r\n    return `${iconName}-white`;\r\n}\r\n\r\nconst isCritical = (type) => {\r\n    return type === 'critical';\r\n}\r\n\r\nconst hasAttachedImage = (event) => {\r\n    return !!event.data && (!!event.data.image || (!!event.data.type && event.data.type === 'graph'));\r\n}\r\n\r\nconst createCard = () => {\r\n    const ribbon = document.getElementById(\"ribbon\");\r\n    const card = appendDiv(ribbon);\r\n    card.classList.add(\"card\");\r\n    return card;\r\n}\r\n\r\nconst setSize = (event, card) => {\r\n    card.classList.add(`card_${event.size}`);\r\n}\r\n\r\nconst setType = (event, card) => {\r\n    if (isCritical(event.type)) {\r\n        card.classList.add('card_critical');\r\n    }\r\n    if (hasAttachedImage(event)) {\r\n        card.classList.add('card_with-image');\r\n    }\r\n}\r\n\r\nconst setCardHeader = (event, card) => {\r\n    const header = appendDiv(card);\r\n    header.classList.add(\"card__row\");\r\n\r\n    const icon = document.createElement(\"img\");\r\n    icon.classList.add(\"card__image\", \"card__image_icon\");\r\n    let iconName = getIconThemeByEventType(event.icon, event.type);\r\n    icon.src = `./images/${iconName}.svg`;\r\n    header.appendChild(icon);\r\n\r\n    const title = appendDiv(header);\r\n    title.innerHTML = trimTitle(event.title, event.size);\r\n    title.classList.add(\"card__title\");\r\n    \r\n    const close = document.createElement(\"img\");\r\n    close.classList.add(\"card__close\");\r\n    iconName = getIconThemeByEventType('cross', event.type);\r\n    close.src = `./images/${iconName}.svg`;\r\n    header.appendChild(close);\r\n}\r\n\r\nconst trimTitle = (str, cardSize) => {\r\n    // The ugly way\r\n    let allowedCharWidth = undefined;\r\n    switch (cardSize) {\r\n        case 'l':\r\n        case 'm':\r\n            allowedCharWidth = 50;\r\n            break;\r\n        case 's':\r\n            allowedCharWidth = 20;\r\n            break;\r\n    };\r\n    if (str.length < allowedCharWidth) return str;\r\n\r\n    return str.slice(0, allowedCharWidth) + '...';\r\n}\r\n\r\nconst setBasicInfo = (event, card) => {\r\n    const basicInfo = appendDiv(card);\r\n    basicInfo.classList.add(\"card__basic-info\");\r\n    if (event.size === 's') {\r\n        basicInfo.classList.add(\"card__basic-info_s\");\r\n    }\r\n    if (isCritical(event.type)) {\r\n        basicInfo.classList.add(\"card__basic-info_with-bottom-margin\");\r\n    }\r\n\r\n    const device = appendDiv(basicInfo);\r\n    device.innerHTML = event.source;\r\n\r\n    const time = appendDiv(basicInfo);\r\n    time.innerHTML = event.time;\r\n}\r\n\r\nconst appendCriticalDetails = (card) => {\r\n    const details = appendDiv(card);\r\n    details.classList.add(\"card__details\");\r\n    return details;\r\n}\r\n\r\nconst appendDescription = (event, card) => {\r\n    if (!event.description) return;\r\n\r\n    const description = appendDiv(card);\r\n    if (event.size === 'l') {\r\n        description.classList.add(\"card__description_l\");\r\n    }\r\n    if (!isCritical(event.type)) {\r\n        description.classList.add(\"card__description\");\r\n    }\r\n    description.innerHTML = event.description;\r\n}\r\n\r\nconst appendPlayer = (event, card) => {\r\n    if (!event.icon === 'music' || !event.data || !event.data.track) return;\r\n\r\n    const player = document.getElementById('player');\r\n    player.content.querySelector('.player__logo').src = event.data.albumcover;\r\n    player.content.querySelector('.player__name').innerHTML = `${event.data.artist} - ${event.data.track.name}`;\r\n    player.content.querySelector('.player__value_time').innerHTML = event.data.track.length;\r\n    player.content.querySelector('.player__value_volume').innerHTML = `${event.data.volume}%`;\r\n    const clone = document.importNode(player.content, true);\r\n    card.appendChild(clone);\r\n}\r\n\r\nconst appendAttachedImage = (event, card) => {\r\n    if (!hasAttachedImage(event)) return;\r\n\r\n    const container = appendDiv(card);\r\n    container.classList.add(\"card__image-container\");\r\n\r\n    if (event.icon === 'cam') {\r\n        const camera = appendDiv(container);\r\n        camera.setAttribute(\"id\", \"camera\");\r\n        camera.setAttribute(\"touch-action\", \"none\");\r\n        camera.classList.add(\"card__image_camera\");\r\n\r\n        const progress = document.createElement(\"progress\");\r\n        progress.setAttribute(\"id\", \"camera-progress\");\r\n        progress.classList.add(\"card__camera-interface\", \"card__progress\");\r\n        progress.setAttribute(\"max\", \"100\");\r\n        progress.setAttribute(\"value\", \"50\");\r\n        container.appendChild(progress);\r\n    } else {\r\n        const image = document.createElement(\"img\");\r\n        image.classList.add(\"card__image\", \"card__image_attachement\");\r\n        image.src = './images/Richdata@3x.png';\r\n        image.srcset = './images/Richdata.png 590w, ./images/Richdata@2x.png 1080w, ./images/Richdata@3x.png 1770w';\r\n        image.sizes = '(max-width: 650px) 560px, (max-width: 910px) 910px, 1100px';\r\n        container.appendChild(image);\r\n    }\r\n}\r\n\r\nconst appendButtons = (event, card) => {\r\n    if (!event.data || !event.data.buttons) return;\r\n\r\n    const buttonRow = appendDiv(card);\r\n    buttonRow.classList.add(\"card__row\");\r\n\r\n    event.data.buttons.forEach((buttonText, i) => {\r\n        const button = appendDiv(buttonRow);\r\n        button.classList.add(\"card__button\");\r\n        if (i === 0) {\r\n            button.classList.add(\"card__button_accent\");\r\n        }\r\n        button.innerHTML = buttonText;\r\n    });\r\n}\r\n\r\nconst appendMeasurements = (event, card) => {\r\n    if (!event.data || !event.data.temperature || !event.data.humidity) return;\r\n\r\n    const measurements = appendDiv(card);\r\n    measurements.classList.add(\"card__measurements\");\r\n\r\n    let measurementData = [];\r\n    if (!!event.data.temperature) {\r\n        measurementData.push(['temperature', 'Температура:&nbsp;', ' C']);\r\n    }\r\n    if (!!event.data.humidity) {\r\n        measurementData.push(['humidity', 'Влажность:&nbsp;', '%']);\r\n    }\r\n\r\n    measurementData.forEach((data) => {\r\n        const measurement = document.getElementById('measurement');\r\n        measurement.content.querySelector('.measurement__text').innerHTML = data[1];\r\n        measurement.content.querySelector('.measurement__value').innerHTML = event.data[data[0]] + data[2];\r\n        const clone = document.importNode(measurement.content, true);\r\n        measurements.appendChild(clone);\r\n    });\r\n}\r\n\r\nconst markLastElementInCard = (lastChild) => {\r\n    if (lastChild.classList.length === 1 && lastChild.classList.contains('card__expander-row')) return;\r\n    lastChild.classList.add(\"card__last-element\");\r\n}\r\n\r\nconst placeExpandButton = (card) => {\r\n    const expand = document.createElement(\"img\");\r\n    expand.classList.add(\"card__expand\");\r\n    expand.src = `./images/next.svg`;\r\n    \r\n    let expandableSibling = undefined;\r\n    if (card.lastElementChild.classList.contains('card__basic-info')) {\r\n        expand.classList.add(\"card__expand_absolute\");\r\n        expandableSibling = card;\r\n    } else if (card.lastElementChild.classList.contains('player') \r\n    || card.lastElementChild.classList.contains('card__image-container')\r\n    || card.lastElementChild.classList.contains('card__measurements')) {\r\n        expandableSibling = card.lastElementChild.previousElementSibling;\r\n        expandableSibling.classList.add(\"card__expander-row\");\r\n    } else {\r\n        expandableSibling = card.lastElementChild;\r\n        expandableSibling.classList.add(\"card__expander-row\");\r\n    }\r\n\r\n    expandableSibling.appendChild(expand);\r\n}\r\n\r\nconst appendCameraInterface = (card) => {\r\n    const cameraInterface = appendDiv(card);\r\n    cameraInterface.setAttribute(\"id\", \"camera-interface\");\r\n    cameraInterface.classList.add(\"card__measurements\", 'card__camera-interface');\r\n\r\n    const zoom = appendDiv(cameraInterface);\r\n    zoom.innerHTML = 'Приближение: 0%';\r\n\r\n    const brightness = appendDiv(cameraInterface);\r\n    brightness.innerHTML = 'Яркость: 100%';\r\n}\r\n\r\nconst generateCards = () => {\r\n    data.events.forEach((event) => {\r\n        let card = createCard();\r\n        setSize(event, card);\r\n        setType(event, card);\r\n        setCardHeader(event, card);\r\n        setBasicInfo(event, card);\r\n\r\n        if (isCritical(event.type))\r\n            card = appendCriticalDetails(card);\r\n\r\n        appendDescription(event, card);\r\n        appendPlayer(event, card);\r\n        appendAttachedImage(event, card);\r\n        appendButtons(event, card);\r\n        appendMeasurements(event, card);\r\n\r\n        placeExpandButton(card);\r\n        markLastElementInCard(card.lastElementChild);\r\n\r\n        if (event.icon === 'cam') \r\n            appendCameraInterface(card);\r\n    });\r\n}\r\n\r\ngenerateCards();","const camera = document.getElementById(\"camera\");\r\nconst cameraInterface = document.getElementById(\"camera-interface\");\r\nconst cameraProgress = document.getElementById(\"camera-progress\");\r\n\r\nconst isTouchDevice = () => {\r\n    return \"ontouchstart\" in document.documentElement;\r\n}\r\n\r\nconst turnGestureInterfaceOn = () => {\r\n    cameraProgress.classList.add('card__camera-interface_enabled');\r\n    cameraInterface.classList.add('card__camera-interface_enabled');\r\n}\r\n\r\nconst setGestures = () => {\r\n    let currentGesture = [];\r\n    let currentGestureName = \"\";\r\n    let recognizeMoves = 0;\r\n\r\n    const cameraStyle = window.getComputedStyle(camera);\r\n    const initialBackgroundSize = parseInt(cameraStyle.getPropertyValue('background-size').slice(0, -2));\r\n\r\n    let initialFingerDistance = undefined;\r\n    let prevFingerAtan = undefined;\r\n\r\n    const constants = {\r\n        zoomSpeedModifier: 0.1,\r\n        minimumBackgroundSize: initialBackgroundSize,\r\n        maximumBackgroundSize: initialBackgroundSize + 500,\r\n        zoomSensitivity: 1,\r\n        imageBorders: 160,\r\n        progressMiddleValue: 50,\r\n        progressSpeed: 3\r\n    };\r\n\r\n    const cameraState = {\r\n        currentBackgroundSize: initialBackgroundSize,\r\n        currentPosition: 0,\r\n        currentBrightness: 100\r\n    };\r\n\r\n    camera.addEventListener('pointerdown', (event) => {\r\n        camera.setPointerCapture(event.pointerId);\r\n        currentGesture.push({\r\n            pointerId: event.pointerId,\r\n            startX: event.x,\r\n            startY: event.y,\r\n            currentBackgroundSize: cameraState.currentBackgroundSize,\r\n            currentPosition: cameraState.currentPosition,\r\n        });\r\n\r\n        if (!event.isPrimary) {\r\n            initialFingerDistance = Math.sqrt(\r\n                Math.pow(currentGesture[0].startX - currentGesture[1].startX, 2) + \r\n                Math.pow(currentGesture[0].startY - currentGesture[1].startY, 2));\r\n        }\r\n    });\r\n\r\n    camera.addEventListener('pointermove', (event) => {\r\n        switch (currentGestureName) {\r\n            case 'pan':\r\n                panX(event);\r\n                break;\r\n            case 'pinch':\r\n                pinch(event);\r\n                break;\r\n            case 'rotate':\r\n                rotate(event);\r\n                break;\r\n            default:\r\n                recognizeGesture(event);\r\n                break;\r\n        }\r\n    });\r\n\r\n    const recognizeGesture = (event) => {\r\n        const fingersCount = currentGesture.length;\r\n        switch (fingersCount) {\r\n            case 0:\r\n                return;\r\n            case 1:\r\n                panX(event);\r\n                break;\r\n            case 2:\r\n                recognizeTwoFingerGesture(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    const recognizeTwoFingerGesture = (event) => {\r\n        const dx = calculateNewDistance(event) - initialFingerDistance;\r\n        recognizeMoves++;\r\n\r\n        if (Math.abs(dx) > 35) {\r\n            currentGestureName = \"pinch\";\r\n        } else if (recognizeMoves > 30) {\r\n            currentGestureName = \"rotate\";\r\n        }\r\n    }\r\n\r\n    const calculateNewDistance = (event) => {\r\n        const {pointerId, x, y} = event;\r\n        const fixedFinger = pointerId !== currentGesture[0].pointerId \r\n            ? currentGesture[0] \r\n            : currentGesture[1];\r\n        const movedFinger = pointerId !== currentGesture[0].pointerId\r\n            ? currentGesture[1] \r\n            : currentGesture[0];\r\n\r\n        movedFinger.startX = x;\r\n        movedFinger.startY = y;\r\n\r\n        return Math.sqrt(\r\n            Math.pow(x - fixedFinger.startX, 2) + \r\n            Math.pow(y - fixedFinger.startY, 2));\r\n    }\r\n\r\n    const panX = (event) => {\r\n        recognizeMoves++;\r\n        if (recognizeMoves > 10) {\r\n            currentGestureName = 'pan';\r\n        }\r\n\r\n        if (!event.isPrimary) return;\r\n        \r\n        const {startX, currentPosition}  = currentGesture[0];\r\n        const {x} = event;\r\n        const dx = x - startX;\r\n\r\n        if (currentPosition + dx < constants.imageBorders*(-1) || currentPosition + dx > constants.imageBorders) return;\r\n\r\n        camera.style.backgroundPositionX = `${currentPosition + dx}px`;\r\n        cameraState.currentPosition = currentPosition + dx;\r\n\r\n        cameraProgress.setAttribute('value', `${constants.progressMiddleValue - cameraState.currentPosition / constants.progressSpeed}`);\r\n    }\r\n\r\n    const pinch = (event) => {\r\n        const newDistance = calculateNewDistance(event);\r\n        const zoomDelta = (newDistance - initialFingerDistance) * 2;\r\n        initialFingerDistance = newDistance;\r\n\r\n        const newBackgroundSize = cameraState.currentBackgroundSize + zoomDelta;\r\n        if (newBackgroundSize < constants.minimumBackgroundSize || newBackgroundSize > constants.maximumBackgroundSize) return;\r\n\r\n        cameraState.currentBackgroundSize = newBackgroundSize;\r\n        camera.style.backgroundSize = `${newBackgroundSize}px`;\r\n\r\n        const zoomPercentValue = Math.round((newBackgroundSize - constants.minimumBackgroundSize) \r\n            / (constants.maximumBackgroundSize - constants.minimumBackgroundSize) * 100);\r\n        cameraInterface.firstElementChild.innerHTML = `Приближение: ${zoomPercentValue}%`;\r\n    }\r\n\r\n    const rotate = (event) => {\r\n        const {x, y, isPrimary, pointerId} = event;\r\n        if (isPrimary) return;\r\n\r\n        const fixedFinger = pointerId !== currentGesture[0].pointerId \r\n            ? currentGesture[0] \r\n            : currentGesture[1];\r\n        \r\n        const fingerAtan = Math.atan2(fixedFinger.startY - y, fixedFinger.startX - x);\r\n\r\n        if (!prevFingerAtan)\r\n            prevFingerAtan = fingerAtan;\r\n\r\n        const increment = fingerAtan - prevFingerAtan > 0 ? 1 : -1;\r\n        prevFingerAtan = fingerAtan;\r\n\r\n        if (cameraState.currentBrightness + increment < 0) return;\r\n\r\n        cameraState.currentBrightness += increment;\r\n        camera.style.webkitFilter = `brightness(${cameraState.currentBrightness}%)`;\r\n        cameraInterface.lastElementChild.innerHTML = `Яркость: ${cameraState.currentBrightness}%`;\r\n    }\r\n\r\n    const cancelGesture = () => {\r\n        if (currentGesture.length === 0) return;\r\n        currentGesture.pop();\r\n\r\n        // allow replace finger multiple times in rotation move\r\n        if (currentGestureName !== \"rotate\" || currentGesture.length === 0) {\r\n            currentGestureName = \"\";\r\n        }\r\n\r\n        initialFingerDistance = undefined;\r\n        prevFingerAtan = undefined;\r\n        recognizeMoves = 0;\r\n    }\r\n\r\n    camera.addEventListener('pointerup', cancelGesture);\r\n    camera.addEventListener('pointercancel', cancelGesture);\r\n}\r\n\r\n\r\nif (isTouchDevice()) {\r\n    turnGestureInterfaceOn();\r\n    setGestures();\r\n}\r\n","const navItems = document.getElementsByClassName('nav__item');\r\nconst navs = document.getElementsByClassName('nav');\r\n\r\nfor (let i = 0; i < navs.length; i++) {\r\n    navs[i].children[0].classList.toggle('nav__item_active');\r\n}\r\n\r\nfor (let i = 0; i < navItems.length; i++) {\r\n    navItems[i].addEventListener('click', (e) => {\r\n        for (let j = 0; j < e.target.parentNode.children.length; j++) {\r\n            e.target.parentNode.children[j].classList.remove('nav__item_active');\r\n        }\r\n        e.target.classList.toggle('nav__item_active');\r\n    })\r\n}","document.getElementById(\"toggle-sidebar\").addEventListener(\"click\", () => {\r\n    document.getElementById(\"sidebar\").classList.toggle(\"sidebar_opened\");\r\n})"]}