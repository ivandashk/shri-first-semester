{"version":3,"sources":["card/card-generator.js","card/gestures-camera.js","nav/nav.js","sidebar/sidebar.js"],"names":["data","events","type","title","source","time","description","icon","values","electricity","water","gas","size","temperature","humidity","albumcover","artist","track","name","length","volume","buttons","image","appendDiv","parent","div","document","createElement","appendChild","getIconThemeByEventType","iconName","eventType","isCritical","hasAttachedImage","event","createCard","ribbon","getElementById","card","classList","add","setSize","setType","setCardHeader","header","src","innerHTML","trimTitle","close","str","cardSize","allowedCharWidth","undefined","slice","setBasicInfo","basicInfo","appendCriticalDetails","details","appendDescription","appendPlayer","player","content","querySelector","clone","importNode","appendAttachedImage","container","camera","setAttribute","appendButtons","buttonRow","forEach","buttonText","i","button","appendMeasurements","measurements","measurementData","push","measurement","markLastElementInCard","lastChild","contains","placeExpandButton","expand","expandableSibling","lastElementChild","previousElementSibling","appendCameraInterface","cameraInterface","generateCards","isTouchDevice","documentElement","turnGestureInterfaceOn","setGestures","currentGesture","currentGestureName","recognizeMoves","cameraStyle","window","getComputedStyle","initialBackgroundSize","parseInt","getPropertyValue","initialFingerDistance","prevFingerAtan","constants","cameraState","currentBackgroundSize","currentPosition","currentBrightness","addEventListener","setPointerCapture","pointerId","startX","x","startY","y","isPrimary","Math","sqrt","pow","panX","pinch","rotate","recognizeGesture","recognizeTwoFingerGesture","dx","calculateNewDistance","abs","fixedFinger","movedFinger","_currentGesture$","style","backgroundPositionX","newDistance","zoomDelta","newBackgroundSize","backgroundSize","zoomPercentValue","round","firstElementChild","fingerAtan","atan2","increment","webkitFilter","cancelGesture","pop","navItems","getElementsByClassName","navs","children","toggle","e","j","target","parentNode","remove"],"mappings":"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","file":"scripts.min.js","sourcesContent":["const data = {\r\n    \"events\": [\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Еженедельный отчет по расходам ресурсов\",\r\n            \"source\": \"Сенсоры потребления\",\r\n            \"time\": \"19:00, Сегодня\",\r\n            \"description\": \"Так держать! За последнюю неделю вы потратили на 10% меньше ресурсов, чем неделей ранее.\",\r\n            \"icon\": \"stats\",\r\n            \"data\": {\r\n                \"type\": \"graph\",\r\n                \"values\": [\r\n                    {\r\n                        \"electricity\": [\r\n                            [\"1536883200\", 115],\r\n                            [\"1536969600\", 117],\r\n                            [\"1537056000\", 117.2],\r\n                            [\"1537142400\", 118],\r\n                            [\"1537228800\", 120],\r\n                            [\"1537315200\", 123],\r\n                            [\"1537401600\", 129]\r\n                        ]\r\n                    },\r\n                    {\r\n                        \"water\": [\r\n                            [\"1536883200\", 40],\r\n                            [\"1536969600\", 40.2],\r\n                            [\"1537056000\", 40.5],\r\n                            [\"1537142400\", 41],\r\n                            [\"1537228800\", 41.4],\r\n                            [\"1537315200\", 41.9],\r\n                            [\"1537401600\", 42.6]\r\n                        ]\r\n                    },\r\n                    {\r\n                        \"gas\": [\r\n                            [\"1536883200\", 13],\r\n                            [\"1536969600\", 13.2],\r\n                            [\"1537056000\", 13.5],\r\n                            [\"1537142400\", 13.7],\r\n                            [\"1537228800\", 14],\r\n                            [\"1537315200\", 14.2],\r\n                            [\"1537401600\", 14.5]\r\n                        ]\r\n                    }\r\n                ]\r\n            },\r\n            \"size\": \"l\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Дверь открыта\",\r\n            \"source\": \"Сенсор входной двери\",\r\n            \"time\": \"18:50, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"key\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Уборка закончена\",\r\n            \"source\": \"Пылесос\",\r\n            \"time\": \"18:45, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"robot-cleaner\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Новый пользователь\",\r\n            \"source\": \"Роутер\",\r\n            \"time\": \"18:45, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"router\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Изменен климатический режим\",\r\n            \"source\": \"Сенсор микроклимата\",\r\n            \"time\": \"18:30, Сегодня\",\r\n            \"description\": \"Установлен климатический режим «Фиджи»\",\r\n            \"icon\": \"thermal\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"temperature\": 24,\r\n                \"humidity\": 80\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"critical\",\r\n            \"title\": \"Невозможно включить кондиционер\",\r\n            \"source\": \"Кондиционер\",\r\n            \"time\": \"18:21, Сегодня\",\r\n            \"description\": \"В комнате открыто окно, закройте его и повторите попытку\",\r\n            \"icon\": \"ac\",\r\n            \"size\": \"m\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Музыка включена\",\r\n            \"source\": \"Яндекс.Станция\",\r\n            \"time\": \"18:16, Сегодня\",\r\n            \"description\": \"Сейчас проигрывается:\",\r\n            \"icon\": \"music\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"albumcover\": \"https://avatars.yandex.net/get-music-content/193823/1820a43e.a.5517056-1/m1000x1000\",\r\n                \"artist\": \"Florence & The Machine\",\r\n                \"track\": {\r\n                    \"name\": \"Big God\",\r\n                    \"length\": \"4:31\"\r\n                },\r\n                \"volume\": 80\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Заканчивается молоко\",\r\n            \"source\": \"Холодильник\",\r\n            \"time\": \"17:23, Сегодня\",\r\n            \"description\": \"Кажется, в холодильнике заканчивается молоко. Вы хотите добавить его в список покупок?\",\r\n            \"icon\": \"fridge\",\r\n            \"size\": \"m\",\r\n            \"data\": {\r\n                \"buttons\": [\"Да\", \"Нет\"]\r\n            }\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Зарядка завершена\",\r\n            \"source\": \"Оконный сенсор\",\r\n            \"time\": \"16:22, Сегодня\",\r\n            \"description\": \"Ура! Устройство «Оконный сенсор» снова в строю!\",\r\n            \"icon\": \"battery\",\r\n            \"size\": \"s\"\r\n        },\r\n        {\r\n            \"type\": \"critical\",\r\n            \"title\": \"Пылесос застрял\",\r\n            \"source\": \"Сенсор движения\",\r\n            \"time\": \"16:17, Сегодня\",\r\n            \"description\": \"Робопылесос не смог сменить свое местоположение в течение последних 3 минут. Похоже, ему нужна помощь.\",\r\n            \"icon\": \"cam\",\r\n            \"data\": {\r\n                \"image\": \"get_it_from_mocks_:3.jpg\"\r\n            },\r\n            \"size\": \"l\"\r\n        },\r\n        {\r\n            \"type\": \"info\",\r\n            \"title\": \"Вода вскипела\",\r\n            \"source\": \"Чайник\",\r\n            \"time\": \"16:20, Сегодня\",\r\n            \"description\": null,\r\n            \"icon\": \"kettle\",\r\n            \"size\": \"s\"\r\n        }\r\n    ]\r\n}\r\n\r\nconst appendDiv = (parent) => {\r\n    const div = document.createElement(\"div\");\r\n    parent.appendChild(div);\r\n    return div;\r\n}\r\n\r\nconst getIconThemeByEventType = (iconName, eventType) => {\r\n    if (!isCritical(eventType)) return iconName;\r\n    return `${iconName}-white`;\r\n}\r\n\r\nconst isCritical = (type) => {\r\n    return type === 'critical';\r\n}\r\n\r\nconst hasAttachedImage = (event) => {\r\n    return !!event.data && (!!event.data.image || (!!event.data.type && event.data.type === 'graph'));\r\n}\r\n\r\nconst createCard = () => {\r\n    const ribbon = document.getElementById(\"ribbon\");\r\n    const card = appendDiv(ribbon);\r\n    card.classList.add(\"card\");\r\n    return card;\r\n}\r\n\r\nconst setSize = (event, card) => {\r\n    card.classList.add(`card_${event.size}`);\r\n}\r\n\r\nconst setType = (event, card) => {\r\n    if (isCritical(event.type)) {\r\n        card.classList.add('card_critical');\r\n    }\r\n    if (hasAttachedImage(event)) {\r\n        card.classList.add('card_with-image');\r\n    }\r\n}\r\n\r\nconst setCardHeader = (event, card) => {\r\n    const header = appendDiv(card);\r\n    header.classList.add(\"card__row\");\r\n\r\n    const icon = document.createElement(\"img\");\r\n    icon.classList.add(\"card__image\", \"card__image_icon\");\r\n    let iconName = getIconThemeByEventType(event.icon, event.type);\r\n    icon.src = `./images/${iconName}.svg`;\r\n    header.appendChild(icon);\r\n\r\n    const title = appendDiv(header);\r\n    title.innerHTML = trimTitle(event.title, event.size);\r\n    title.classList.add(\"card__title\");\r\n    \r\n    const close = document.createElement(\"img\");\r\n    close.classList.add(\"card__close\");\r\n    iconName = getIconThemeByEventType('cross', event.type);\r\n    close.src = `./images/${iconName}.svg`;\r\n    header.appendChild(close);\r\n}\r\n\r\nconst trimTitle = (str, cardSize) => {\r\n    // The ugly way\r\n    let allowedCharWidth = undefined;\r\n    switch (cardSize) {\r\n        case 'l':\r\n        case 'm':\r\n            allowedCharWidth = 50;\r\n            break;\r\n        case 's':\r\n            allowedCharWidth = 20;\r\n            break;\r\n    };\r\n    if (str.length < allowedCharWidth) return str;\r\n\r\n    return str.slice(0, allowedCharWidth) + '...';\r\n}\r\n\r\nconst setBasicInfo = (event, card) => {\r\n    const basicInfo = appendDiv(card);\r\n    basicInfo.classList.add(\"card__basic-info\");\r\n    if (event.size === 's') {\r\n        basicInfo.classList.add(\"card__basic-info_s\");\r\n    }\r\n    if (isCritical(event.type)) {\r\n        basicInfo.classList.add(\"card__basic-info_with-bottom-margin\");\r\n    }\r\n\r\n    const device = appendDiv(basicInfo);\r\n    device.innerHTML = event.source;\r\n\r\n    const time = appendDiv(basicInfo);\r\n    time.innerHTML = event.time;\r\n}\r\n\r\nconst appendCriticalDetails = (card) => {\r\n    const details = appendDiv(card);\r\n    details.classList.add(\"card__details\");\r\n    return details;\r\n}\r\n\r\nconst appendDescription = (event, card) => {\r\n    if (!event.description) return;\r\n\r\n    const description = appendDiv(card);\r\n    if (event.size === 'l') {\r\n        description.classList.add(\"card__description_l\");\r\n    }\r\n    if (!isCritical(event.type)) {\r\n        description.classList.add(\"card__description\");\r\n    }\r\n    description.innerHTML = event.description;\r\n}\r\n\r\nconst appendPlayer = (event, card) => {\r\n    if (!event.icon === 'music' || !event.data || !event.data.track) return;\r\n\r\n    const player = document.getElementById('player');\r\n    player.content.querySelector('.player__logo').src = event.data.albumcover;\r\n    player.content.querySelector('.player__name').innerHTML = `${event.data.artist} - ${event.data.track.name}`;\r\n    player.content.querySelector('.player__value_time').innerHTML = event.data.track.length;\r\n    player.content.querySelector('.player__value_volume').innerHTML = `${event.data.volume}%`;\r\n    const clone = document.importNode(player.content, true);\r\n    card.appendChild(clone);\r\n}\r\n\r\nconst appendAttachedImage = (event, card) => {\r\n    if (!hasAttachedImage(event)) return;\r\n\r\n    const container = appendDiv(card);\r\n    container.classList.add(\"card__image-container\");\r\n\r\n    if (event.icon === 'cam') {\r\n        const camera = appendDiv(container);\r\n        camera.setAttribute(\"id\", \"camera\");\r\n        camera.setAttribute(\"touch-action\", \"none\");\r\n        camera.classList.add(\"card__image_camera\");\r\n    } else {\r\n        const image = document.createElement(\"img\");\r\n        image.classList.add(\"card__image\", \"card__image_attachement\");\r\n        image.src = './images/Richdata.png';\r\n        container.appendChild(image);\r\n    }\r\n}\r\n\r\nconst appendButtons = (event, card) => {\r\n    if (!event.data || !event.data.buttons) return;\r\n\r\n    const buttonRow = appendDiv(card);\r\n    buttonRow.classList.add(\"card__row\");\r\n\r\n    event.data.buttons.forEach((buttonText, i) => {\r\n        const button = appendDiv(buttonRow);\r\n        button.classList.add(\"card__button\");\r\n        if (i === 0) {\r\n            button.classList.add(\"card__button_accent\");\r\n        }\r\n        button.innerHTML = buttonText;\r\n    });\r\n}\r\n\r\nconst appendMeasurements = (event, card) => {\r\n    if (!event.data || !event.data.temperature || !event.data.humidity) return;\r\n\r\n    const measurements = appendDiv(card);\r\n    measurements.classList.add(\"card__measurements\");\r\n\r\n    let measurementData = [];\r\n    if (!!event.data.temperature) {\r\n        measurementData.push(['temperature', 'Температура:&nbsp;', ' C']);\r\n    }\r\n    if (!!event.data.humidity) {\r\n        measurementData.push(['humidity', 'Влажность:&nbsp;', '%']);\r\n    }\r\n\r\n    measurementData.forEach((data) => {\r\n        const measurement = document.getElementById('measurement');\r\n        measurement.content.querySelector('.measurement__text').innerHTML = data[1];\r\n        measurement.content.querySelector('.measurement__value').innerHTML = event.data[data[0]] + data[2];\r\n        const clone = document.importNode(measurement.content, true);\r\n        measurements.appendChild(clone);\r\n    });\r\n}\r\n\r\nconst markLastElementInCard = (lastChild) => {\r\n    if (lastChild.classList.length === 1 && lastChild.classList.contains('card__expander-row')) return;\r\n    lastChild.classList.add(\"card__last-element\");\r\n}\r\n\r\nconst placeExpandButton = (card) => {\r\n    const expand = document.createElement(\"img\");\r\n    expand.classList.add(\"card__expand\");\r\n    expand.src = `./images/next.svg`;\r\n    \r\n    let expandableSibling = undefined;\r\n    if (card.lastElementChild.classList.contains('card__basic-info')) {\r\n        expand.classList.add(\"card__expand_absolute\");\r\n        expandableSibling = card;\r\n    } else if (card.lastElementChild.classList.contains('player') \r\n    || card.lastElementChild.classList.contains('card__image-container')\r\n    || card.lastElementChild.classList.contains('card__measurements')) {\r\n        expandableSibling = card.lastElementChild.previousElementSibling;\r\n        expandableSibling.classList.add(\"card__expander-row\");\r\n    } else {\r\n        expandableSibling = card.lastElementChild;\r\n        expandableSibling.classList.add(\"card__expander-row\");\r\n    }\r\n\r\n    expandableSibling.appendChild(expand);\r\n}\r\n\r\nconst appendCameraInterface = (card) => {\r\n    const cameraInterface = appendDiv(card);\r\n    cameraInterface.setAttribute(\"id\", \"camera-interface\");\r\n    cameraInterface.classList.add(\"card__measurements\", 'card__camera-interface');\r\n\r\n    const zoom = appendDiv(cameraInterface);\r\n    zoom.innerHTML = 'Приближение: 0%';\r\n\r\n    const brightness = appendDiv(cameraInterface);\r\n    brightness.innerHTML = 'Яркость: 100%';\r\n}\r\n\r\nconst generateCards = () => {\r\n    data.events.forEach((event) => {\r\n        let card = createCard();\r\n        setSize(event, card);\r\n        setType(event, card);\r\n        setCardHeader(event, card);\r\n        setBasicInfo(event, card);\r\n\r\n        if (isCritical(event.type))\r\n            card = appendCriticalDetails(card);\r\n\r\n        appendDescription(event, card);\r\n        appendPlayer(event, card);\r\n        appendAttachedImage(event, card);\r\n        appendButtons(event, card);\r\n        appendMeasurements(event, card);\r\n\r\n        placeExpandButton(card);\r\n        markLastElementInCard(card.lastElementChild);\r\n\r\n        if (event.icon === 'cam') \r\n            appendCameraInterface(card);\r\n    });\r\n}\r\n\r\ngenerateCards();","const camera = document.getElementById(\"camera\");\r\nconst cameraInterface = document.getElementById(\"camera-interface\");\r\n\r\nconst isTouchDevice = () => {\r\n    return \"ontouchstart\" in document.documentElement;\r\n}\r\n\r\nconst turnGestureInterfaceOn = () => {\r\n    cameraInterface.classList.add('card__camera-interface_enabled');\r\n}\r\n\r\nconst setGestures = () => {\r\n    let currentGesture = [];\r\n    let currentGestureName = \"\";\r\n    let recognizeMoves = 0;\r\n\r\n    const cameraStyle = window.getComputedStyle(camera);\r\n    const initialBackgroundSize = parseInt(cameraStyle.getPropertyValue('background-size').slice(0, -2));\r\n\r\n    let initialFingerDistance = undefined;\r\n    let prevFingerAtan = undefined;\r\n\r\n    const constants = {\r\n        zoomSpeedModifier: 0.1,\r\n        minimumBackgroundSize: initialBackgroundSize,\r\n        maximumBackgroundSize: initialBackgroundSize + 500,\r\n        zoomSensitivity: 1\r\n    };\r\n\r\n    const cameraState = {\r\n        currentBackgroundSize: initialBackgroundSize,\r\n        currentPosition: 0,\r\n        currentBrightness: 100\r\n    };\r\n\r\n    camera.addEventListener('pointerdown', (event) => {\r\n        camera.setPointerCapture(event.pointerId);\r\n        currentGesture.push({\r\n            pointerId: event.pointerId,\r\n            startX: event.x,\r\n            startY: event.y,\r\n            currentBackgroundSize: cameraState.currentBackgroundSize,\r\n            currentPosition: cameraState.currentPosition,\r\n        });\r\n\r\n        if (!event.isPrimary) {\r\n            initialFingerDistance = Math.sqrt(\r\n                Math.pow(currentGesture[0].startX - currentGesture[1].startX, 2) + \r\n                Math.pow(currentGesture[0].startY - currentGesture[1].startY, 2));\r\n        }\r\n    });\r\n\r\n    camera.addEventListener('pointermove', (event) => {\r\n        switch (currentGestureName) {\r\n            case 'pan':\r\n                panX(event);\r\n                break;\r\n            case 'pinch':\r\n                pinch(event);\r\n                break;\r\n            case 'rotate':\r\n                rotate(event);\r\n                break;\r\n            default:\r\n                recognizeGesture(event);\r\n                break;\r\n        }\r\n    });\r\n\r\n    const recognizeGesture = (event) => {\r\n        const fingersCount = currentGesture.length;\r\n        switch (fingersCount) {\r\n            case 0:\r\n                return;\r\n            case 1:\r\n                panX(event);\r\n                break;\r\n            case 2:\r\n                recognizeTwoFingerGesture(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    const recognizeTwoFingerGesture = (event) => {\r\n        const dx = calculateNewDistance(event) - initialFingerDistance;\r\n        recognizeMoves++;\r\n\r\n        if (Math.abs(dx) > 35) {\r\n            currentGestureName = \"pinch\";\r\n        } else if (recognizeMoves > 30) {\r\n            currentGestureName = \"rotate\";\r\n        }\r\n    }\r\n\r\n    const calculateNewDistance = (event) => {\r\n        const {pointerId, x, y} = event;\r\n        const fixedFinger = pointerId !== currentGesture[0].pointerId \r\n            ? currentGesture[0] \r\n            : currentGesture[1];\r\n        const movedFinger = pointerId !== currentGesture[0].pointerId\r\n            ? currentGesture[1] \r\n            : currentGesture[0];\r\n\r\n        movedFinger.startX = x;\r\n        movedFinger.startY = y;\r\n\r\n        return Math.sqrt(\r\n            Math.pow(x - fixedFinger.startX, 2) + \r\n            Math.pow(y - fixedFinger.startY, 2));\r\n    }\r\n\r\n    const panX = (event) => {\r\n        recognizeMoves++;\r\n        if (recognizeMoves > 10) {\r\n            currentGestureName = 'pan';\r\n        }\r\n\r\n        if (!event.isPrimary) return;\r\n        \r\n        const {startX, currentPosition}  = currentGesture[0];\r\n        const {x} = event;\r\n        const dx = x - startX;\r\n        camera.style.backgroundPositionX = `${currentPosition + dx}px`;\r\n        cameraState.currentPosition = currentPosition + dx;\r\n    }\r\n\r\n    const pinch = (event) => {\r\n        const newDistance = calculateNewDistance(event);\r\n        const zoomDelta = (newDistance - initialFingerDistance) * 2;\r\n        initialFingerDistance = newDistance;\r\n\r\n        const newBackgroundSize = cameraState.currentBackgroundSize + zoomDelta;\r\n        if (newBackgroundSize < constants.minimumBackgroundSize || newBackgroundSize > constants.maximumBackgroundSize) return;\r\n\r\n        cameraState.currentBackgroundSize = newBackgroundSize;\r\n        camera.style.backgroundSize = `${newBackgroundSize}px`;\r\n\r\n        const zoomPercentValue = Math.round((newBackgroundSize - constants.minimumBackgroundSize) \r\n            / (constants.maximumBackgroundSize - constants.minimumBackgroundSize) * 100);\r\n        cameraInterface.firstElementChild.innerHTML = `Приближение: ${zoomPercentValue}%`;\r\n    }\r\n\r\n    const rotate = (event) => {\r\n        const {x, y, isPrimary, pointerId} = event;\r\n        if (isPrimary) return;\r\n\r\n        const fixedFinger = pointerId !== currentGesture[0].pointerId \r\n            ? currentGesture[0] \r\n            : currentGesture[1];\r\n        \r\n        const fingerAtan = Math.atan2(fixedFinger.startY - y, fixedFinger.startX - x);\r\n\r\n        if (!prevFingerAtan)\r\n            prevFingerAtan = fingerAtan;\r\n\r\n        const increment = fingerAtan - prevFingerAtan > 0 ? 1 : -1;\r\n        prevFingerAtan = fingerAtan;\r\n\r\n        if (cameraState.currentBrightness + increment < 0) return;\r\n\r\n        cameraState.currentBrightness += increment;\r\n        camera.style.webkitFilter = `brightness(${cameraState.currentBrightness}%)`;\r\n        cameraInterface.lastElementChild.innerHTML = `Яркость: ${cameraState.currentBrightness}%`;\r\n    }\r\n\r\n    const cancelGesture = () => {\r\n        if (currentGesture.length === 0) return;\r\n        currentGesture.pop();\r\n\r\n        // allow replace finger multiple times in rotation move\r\n        if (currentGestureName !== \"rotate\" || currentGesture.length === 0) {\r\n            currentGestureName = \"\";\r\n        }\r\n\r\n        initialFingerDistance = undefined;\r\n        prevFingerAtan = undefined;\r\n        recognizeMoves = 0;\r\n    }\r\n\r\n    camera.addEventListener('pointerup', cancelGesture);\r\n    camera.addEventListener('pointercancel', cancelGesture);\r\n}\r\n\r\n\r\nif (isTouchDevice()) {\r\n    turnGestureInterfaceOn();\r\n    setGestures();\r\n}\r\n","const navItems = document.getElementsByClassName('nav__item');\r\nconst navs = document.getElementsByClassName('nav');\r\n\r\nfor (let i = 0; i < navs.length; i++) {\r\n    navs[i].children[0].classList.toggle('nav__item_active');\r\n}\r\n\r\nfor (let i = 0; i < navItems.length; i++) {\r\n    navItems[i].addEventListener('click', (e) => {\r\n        for (let j = 0; j < e.target.parentNode.children.length; j++) {\r\n            e.target.parentNode.children[j].classList.remove('nav__item_active');\r\n        }\r\n        e.target.classList.toggle('nav__item_active');\r\n    })\r\n}","document.getElementById(\"toggle-sidebar\").addEventListener(\"click\", () => {\r\n    document.getElementById(\"sidebar\").classList.toggle(\"sidebar_opened\");\r\n})"]}