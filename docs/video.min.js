"use strict";function initVideo(e,t){if(Hls.isSupported()){var a=new Hls;a.loadSource(t),a.attachMedia(e),a.on(Hls.Events.MANIFEST_PARSED,function(){e.play()});var n=!1;e.addEventListener("click",function(){e.audioAnalyser||initializeAudioContext(e),e.classList.toggle("video-page__video_opened"),document.getElementById("video-controls").classList.toggle("video-controls_opened"),n?(e.audioAnalyser.audioCtx.suspend(),e.style.transform="",e.muted=!0,n=!1):(n=!0,e.audioAnalyser.audioCtx.resume().then(function(){updateVolumeBar(e)}),e.muted=!1,centerVideo(e))})}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src="https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8",e.addEventListener("loadedmetadata",function(){e.play()}))}var initializeAudioContext=function(e){e.audioAnalyser={},e.audioAnalyser.audioCtx=new AudioContext;var t=e.audioAnalyser.audioCtx.createMediaElementSource(e);e.audioAnalyser.analyser=e.audioAnalyser.audioCtx.createAnalyser(),e.audioAnalyser.analyser.smoothingTimeConstant=.9,t.connect(e.audioAnalyser.analyser),e.audioAnalyser.analyser.connect(e.audioAnalyser.audioCtx.destination),e.audioAnalyser.analyser.fftSize=32,e.audioAnalyser.dataArray=new Uint8Array(e.audioAnalyser.analyser.frequencyBinCount),e.audioAnalyser.analyser.getByteFrequencyData(e.audioAnalyser.dataArray),e.audioAnalyser.volumePercent=0},updateVolumeBar=function(t){!function e(){"running"===t.audioAnalyser.audioCtx.state&&(requestAnimationFrame(e),t.audioAnalyser.analyser.getByteFrequencyData(t.audioAnalyser.dataArray),t.audioAnalyser.volumePercent=parseInt(Math.max.apply(null,t.audioAnalyser.dataArray)/255*100),document.getElementById("volume").setAttribute("x2",t.audioAnalyser.volumePercent+"%"))}()},centerVideo=function(e){var t=document.body.clientWidth/2,a=document.body.clientHeight/2-55,n=window.getComputedStyle(e),o=e.getBoundingClientRect(),i=n.getPropertyValue("transform-origin").match(/\d+(.\d+)?/g),d=[o.x+parseFloat(i[0]),o.y+parseFloat(i[1])],l="translate("+(t-d[0])+"px, "+(a-d[1])+"px) scale(2.8)";e.style.transform=l},AudioContext=window.AudioContext||window.webkitAudioContext;AudioContext||alert("Ваш браузер не поддерживает Web Audio API"),initVideo(document.getElementById("video-1"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fsosed%2Fmaster.m3u8"),initVideo(document.getElementById("video-2"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fcat%2Fmaster.m3u8"),initVideo(document.getElementById("video-3"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fdog%2Fmaster.m3u8"),initVideo(document.getElementById("video-4"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fhall%2Fmaster.m3u8"),document.getElementById("toggle-sidebar").addEventListener("click",function(){document.getElementById("sidebar").classList.toggle("sidebar_opened")});
//# sourceMappingURL=video.min.js.map
