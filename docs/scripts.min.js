"use strict";var data={events:[{type:"info",title:"Еженедельный отчет по расходам ресурсов",source:"Сенсоры потребления",time:"19:00, Сегодня",description:"Так держать! За последнюю неделю вы потратили на 10% меньше ресурсов, чем неделей ранее.",icon:"stats",data:{type:"graph",values:[{electricity:[["1536883200",115],["1536969600",117],["1537056000",117.2],["1537142400",118],["1537228800",120],["1537315200",123],["1537401600",129]]},{water:[["1536883200",40],["1536969600",40.2],["1537056000",40.5],["1537142400",41],["1537228800",41.4],["1537315200",41.9],["1537401600",42.6]]},{gas:[["1536883200",13],["1536969600",13.2],["1537056000",13.5],["1537142400",13.7],["1537228800",14],["1537315200",14.2],["1537401600",14.5]]}]},size:"l"},{type:"info",title:"Дверь открыта",source:"Сенсор входной двери",time:"18:50, Сегодня",description:null,icon:"key",size:"s"},{type:"info",title:"Уборка закончена",source:"Пылесос",time:"18:45, Сегодня",description:null,icon:"robot-cleaner",size:"s"},{type:"info",title:"Новый пользователь",source:"Роутер",time:"18:45, Сегодня",description:null,icon:"router",size:"s"},{type:"info",title:"Изменен климатический режим",source:"Сенсор микроклимата",time:"18:30, Сегодня",description:"Установлен климатический режим «Фиджи»",icon:"thermal",size:"m",data:{temperature:24,humidity:80}},{type:"critical",title:"Невозможно включить кондиционер",source:"Кондиционер",time:"18:21, Сегодня",description:"В комнате открыто окно, закройте его и повторите попытку",icon:"ac",size:"m"},{type:"info",title:"Музыка включена",source:"Яндекс.Станция",time:"18:16, Сегодня",description:"Сейчас проигрывается:",icon:"music",size:"m",data:{albumcover:"https://avatars.yandex.net/get-music-content/193823/1820a43e.a.5517056-1/m1000x1000",artist:"Florence & The Machine",track:{name:"Big God",length:"4:31"},volume:80}},{type:"info",title:"Заканчивается молоко",source:"Холодильник",time:"17:23, Сегодня",description:"Кажется, в холодильнике заканчивается молоко. Вы хотите добавить его в список покупок?",icon:"fridge",size:"m",data:{buttons:["Да","Нет"]}},{type:"info",title:"Зарядка завершена",source:"Оконный сенсор",time:"16:22, Сегодня",description:"Ура! Устройство «Оконный сенсор» снова в строю!",icon:"battery",size:"s"},{type:"critical",title:"Пылесос застрял",source:"Сенсор движения",time:"16:17, Сегодня",description:"Робопылесос не смог сменить свое местоположение в течение последних 3 минут. Похоже, ему нужна помощь.",icon:"cam",data:{image:"get_it_from_mocks_:3.jpg"},size:"l"},{type:"info",title:"Вода вскипела",source:"Чайник",time:"16:20, Сегодня",description:null,icon:"kettle",size:"s"}]},appendDiv=function(e){var t=document.createElement("div");return e.appendChild(t),t},getIconThemeByEventType=function(e,t){return isCritical(t)?e+"-white":e},isCritical=function(e){return"critical"===e},hasAttachedImage=function(e){return!!e.data&&(!!e.data.image||!!e.data.type&&"graph"===e.data.type)},createCard=function(){var e=document.getElementById("ribbon"),t=appendDiv(e);return t.classList.add("card"),t},setSize=function(e,t){t.classList.add("card_"+e.size)},setType=function(e,t){isCritical(e.type)&&t.classList.add("card_critical"),hasAttachedImage(e)&&t.classList.add("card_with-image")},setCardHeader=function(e,t){var a=appendDiv(t);a.classList.add("card__row");var n=document.createElement("img");n.classList.add("card__image","card__image_icon");var i=getIconThemeByEventType(e.icon,e.type);n.src="./images/"+i+".svg",a.appendChild(n);var r=appendDiv(a);r.innerHTML=trimTitle(e.title,e.size),r.classList.add("card__title");var c=document.createElement("img");c.classList.add("card__close"),i=getIconThemeByEventType("cross",e.type),c.src="./images/"+i+".svg",a.appendChild(c)},trimTitle=function(e,t){var a=void 0;switch(t){case"l":case"m":a=50;break;case"s":a=20}return e.length<a?e:e.slice(0,a)+"..."},setBasicInfo=function(e,t){var a=appendDiv(t);a.classList.add("card__basic-info"),"s"===e.size&&a.classList.add("card__basic-info_s"),isCritical(e.type)&&a.classList.add("card__basic-info_with-bottom-margin"),appendDiv(a).innerHTML=e.source,appendDiv(a).innerHTML=e.time},appendCriticalDetails=function(e){var t=appendDiv(e);return t.classList.add("card__details"),t},appendDescription=function(e,t){if(e.description){var a=appendDiv(t);"l"===e.size&&a.classList.add("card__description_l"),isCritical(e.type)||a.classList.add("card__description"),a.innerHTML=e.description}},appendPlayer=function(e,t){if("music"!==!e.icon&&e.data&&e.data.track){var a=document.getElementById("player");a.content.querySelector(".player__logo").src=e.data.albumcover,a.content.querySelector(".player__name").innerHTML=e.data.artist+" - "+e.data.track.name,a.content.querySelector(".player__value_time").innerHTML=e.data.track.length,a.content.querySelector(".player__value_volume").innerHTML=e.data.volume+"%";var n=document.importNode(a.content,!0);t.appendChild(n)}},appendAttachedImage=function(e,t){if(hasAttachedImage(e)){var a=appendDiv(t);if(a.classList.add("card__image-container"),"cam"===e.icon){var n=appendDiv(a);n.setAttribute("id","camera"),n.setAttribute("touch-action","none"),n.classList.add("card__image_camera")}else{var i=document.createElement("img");i.classList.add("card__image","card__image_attachement"),i.src="./images/Richdata.png",a.appendChild(i)}}},appendButtons=function(e,t){if(e.data&&e.data.buttons){var n=appendDiv(t);n.classList.add("card__row"),e.data.buttons.forEach(function(e,t){var a=appendDiv(n);a.classList.add("card__button"),0===t&&a.classList.add("card__button_accent"),a.innerHTML=e})}},appendMeasurements=function(n,e){if(n.data&&n.data.temperature&&n.data.humidity){var i=appendDiv(e);i.classList.add("card__measurements");var t=[];n.data.temperature&&t.push(["temperature","Температура:&nbsp;"," C"]),n.data.humidity&&t.push(["humidity","Влажность:&nbsp;","%"]),t.forEach(function(e){var t=document.getElementById("measurement");t.content.querySelector(".measurement__text").innerHTML=e[1],t.content.querySelector(".measurement__value").innerHTML=n.data[e[0]]+e[2];var a=document.importNode(t.content,!0);i.appendChild(a)})}},markLastElementInCard=function(e){1===e.classList.length&&e.classList.contains("card__expander-row")||e.classList.add("card__last-element")},placeExpandButton=function(e){var t=document.createElement("img");t.classList.add("card__expand"),t.src="./images/next.svg";var a=void 0;e.lastElementChild.classList.contains("card__basic-info")?(t.classList.add("card__expand_absolute"),a=e):e.lastElementChild.classList.contains("player")||e.lastElementChild.classList.contains("card__image-container")||e.lastElementChild.classList.contains("card__measurements")?(a=e.lastElementChild.previousElementSibling).classList.add("card__expander-row"):(a=e.lastElementChild).classList.add("card__expander-row"),a.appendChild(t)},appendCameraInterface=function(e){var t=appendDiv(e);t.setAttribute("id","camera-interface"),t.classList.add("card__measurements","card__camera-interface"),appendDiv(t).innerHTML="Приближение: 0%",appendDiv(t).innerHTML="Яркость: 100%"},generateCards=function(){data.events.forEach(function(e){var t=createCard();setSize(e,t),setType(e,t),setCardHeader(e,t),setBasicInfo(e,t),isCritical(e.type)&&(t=appendCriticalDetails(t)),appendDescription(e,t),appendPlayer(e,t),appendAttachedImage(e,t),appendButtons(e,t),appendMeasurements(e,t),placeExpandButton(t),markLastElementInCard(t.lastElementChild),"cam"===e.icon&&appendCameraInterface(t)})};generateCards();var camera=document.getElementById("camera"),cameraInterface=document.getElementById("camera-interface"),isTouchDevice=function(){return"ontouchstart"in document.documentElement},turnGestureInterfaceOn=function(){cameraInterface.classList.add("card__camera-interface_enabled")},setGestures=function(){var l=[],p=.1,m=500,u=1e3,_={currentBackgroundSize:500,currentPosition:0};camera.addEventListener("pointerdown",function(e){camera.setPointerCapture(e.pointerId),l.push({pointerId:e.pointerId,startX:e.x,startY:e.y,currentBackgroundSize:_.currentBackgroundSize,currentPosition:_.currentPosition})}),camera.addEventListener("pointermove",function(e){switch(l.length){case 0:return;case 1:t(e);break;case 2:a(e)}});var t=function(e){var t=l[0],a=t.startX,n=t.currentPosition,i=e.x-a;camera.style.backgroundPositionX=n+i+"px",_.currentPosition=n+i},a=function(e){var t=e.pointerId,a=e.x,n=e.y,i=t===l[0].pointerId?l[0]:l[1],r=i.pointerId===l[1].pointerId?l[0]:l[1],c=Math.sqrt(Math.pow(i.startX-r.startX,2)+Math.pow(i.startY-r.startY,2)),s=(Math.sqrt(Math.pow(a-r.startX,2)+Math.pow(n-r.startY,2))-c)*p,d=_.currentBackgroundSize+s;if(!(d<m||u<d)){_.currentBackgroundSize=d,camera.style.backgroundSize=_.currentBackgroundSize+"px";var o=Math.round((d-m)/(u-m)*100);cameraInterface.firstElementChild.innerHTML="Приближение: "+o+"%"}},e=function(){0!==l.length&&(l=[])};camera.addEventListener("pointerup",e),camera.addEventListener("pointercancel",e)};isTouchDevice()&&(turnGestureInterfaceOn(),setGestures());for(var navItems=document.getElementsByClassName("nav__item"),navs=document.getElementsByClassName("nav"),i=0;i<navs.length;i++)navs[i].children[0].classList.toggle("nav__item_active");for(var _i=0;_i<navItems.length;_i++)navItems[_i].addEventListener("click",function(e){for(var t=0;t<e.target.parentNode.children.length;t++)e.target.parentNode.children[t].classList.remove("nav__item_active");e.target.classList.toggle("nav__item_active")});document.getElementById("toggle-sidebar").addEventListener("click",function(){document.getElementById("sidebar").classList.toggle("sidebar_opened")});
//# sourceMappingURL=scripts.min.js.map
